[Unit]
Description=TEAMD container
{% if multi_instance == 'true' %}
Requires=swss@%i.service
Requires=updategraph.service
After=swss@%i.service
After=updategraph.service
{% else %}
Requires=updategraph.service
After=updategraph.service swss.service
{% endif %}
Before=ntp-config.service
StartLimitIntervalSec=1200
StartLimitBurst=3

[Service]
User={{ sonicadmin_user }}
{% if multi_instance == 'true' %}
ExecStartPre=/usr/bin/{{docker_container_name}}.sh start %i
ExecStart=/usr/bin/{{docker_container_name}}.sh wait %i
ExecStop=/usr/bin/{{docker_container_name}}.sh stop %i
{% else %}
ExecStartPre=/usr/bin/{{docker_container_name}}.sh start
ExecStart=/usr/bin/{{docker_container_name}}.sh wait
ExecStop=/usr/bin/{{docker_container_name}}.sh stop
{% endif %}
Restart=always
RestartSec=30

[Install]
WantedBy=multi-user.target
