[Unit]
Description=Database container
{% if multi_instance == 'true' %}
Requires=docker.service database.service
After=docker.service database.service
{% else %}
Requires=docker.service
After=docker.service
After=rc-local.service
{% endif %}
StartLimitIntervalSec=1200
StartLimitBurst=3

[Service]
User=root
{% if multi_instance == 'true' %}
ExecStartPre=/usr/bin/{{docker_container_name}}.sh start %i
ExecStart=/usr/bin/{{docker_container_name}}.sh wait %i
ExecStop=/usr/bin/{{docker_container_name}}.sh stop %i
{% else %}
ExecStartPre=/usr/bin/{{docker_container_name}}.sh start
ExecStart=/usr/bin/{{docker_container_name}}.sh wait
ExecStop=/usr/bin/{{docker_container_name}}.sh stop
{% endif %}
Restart=always
RestartSec=30

[Install]
WantedBy=multi-user.target
