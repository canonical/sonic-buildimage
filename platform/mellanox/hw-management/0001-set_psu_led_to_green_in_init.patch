From 6411e8869adbc969ca0d383b9035cb7a150705c5 Mon Sep 17 00:00:00 2001
From: Shlomi Bitton <shlomibi@nvidia.com>
Date: Tue, 24 May 2022 12:07:41 +0000
Subject: [PATCH] Add a new patch to set PSU led to green on init to resolve
 race condition issue

Signed-off-by: Shlomi Bitton <shlomibi@nvidia.com>
---
 usr/usr/bin/hw-management-chassis-events.sh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/usr/usr/bin/hw-management-chassis-events.sh b/usr/usr/bin/hw-management-chassis-events.sh
index 2d6c70b..8f6b57d 100755
--- a/usr/usr/bin/hw-management-chassis-events.sh
+++ b/usr/usr/bin/hw-management-chassis-events.sh
@@ -514,7 +514,9 @@ if [ "$1" == "add" ]; then
 		name=$(echo "$5" | cut -d':' -f2)
 		color=$(echo "$5" | cut -d':' -f3)
 		ln -sf "$3""$4"/brightness $led_path/led_"$name"_"$color"
-		echo timer > "$3""$4"/trigger
+                if [ "$color" == "green" ]; then
+                    echo timer > "$3""$4"/trigger
+                fi
 		ln -sf "$3""$4"/delay_on  $led_path/led_"$name"_"$color"_delay_on
 		ln -sf "$3""$4"/delay_off $led_path/led_"$name"_"$color"_delay_off
 		ln -sf $LED_STATE $led_path/led_"$name"_state
-- 
2.14.1

